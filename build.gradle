apply plugin: 'java'

sourceCompatibility = 1.5
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.seleniumhq.selenium:selenium-java:2.46.0'
    compile 'org.seleniumhq.selenium:selenium-server:2.46.0'
    compile 'net.sourceforge.jexcelapi:jxl:2.6.12'
    compile 'org.testng:testng:6.9.4'
}

task uberjar(type: Jar) {
    from files(sourceSets.main.output.classesDir)
    from configurations.runtime.asFileTree.files.collect { zipTree(it) }

    manifest {
        attributes 'Main-Class': 'com.istuary.tests.TestRunner'
    }
}

jar {
    manifest {
        attributes 'Main-Class': 'com.istuary.tests.TestRunner'
    }
    from(configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) }) {
        // remove all signature files
        exclude "META-INF/*.SF"
        exclude "META-INF/*.DSA"
        exclude "META-INF/*.RSA"
    }
}